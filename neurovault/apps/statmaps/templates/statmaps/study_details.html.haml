{% extends "base.html" %}
{% load coffeescript %}
{% block includes %}
    :javascript
        var images = [
        {% for statmap in study.statmap_set.all %}
        {
            'name': '{{ statmap.name }}',
            'url': '{{ statmap.json_path }}',
            'colorPalette': 'red'
        },
        {% endfor %}]
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css" rel="stylesheet">
    <link href="{% static "css/viewer.css"%}" media="screen" rel="stylesheet" type="text/css" />
    <script src="{% static "scripts/rainbow.js"%}" type="text/javascript"></script>
    <script src="{% static "scripts/sylvester.js"%}" type="text/javascript"></script>
    <script src="{% static "scripts/amplify.js"%}" type="text/javascript"></script>
    <script src="{% static "scripts/panzoom.js"%}" type="text/javascript"></script>
    <script src="{% static "scripts/viewer.js"%}" type="text/javascript"></script>
    <script src="{% static "scripts/app.js"%}" type="text/javascript"></script>
    :javascript
        {% inlinecoffeescript %}
            $(document).ready ->
                $('#show-viewer').click( () =>
                    window.viewer.paint()
                    setTimeout(() ->
                        window.viewer.paint()
                    , 1)
                )
        {% endinlinecoffeescript %}
{% endblock %}

{% block content %}
%h1 {{ study.name }}
.row
    .span11
        %ul.nav.nav-tabs
            %li
                %a{href:'#details', data-toggle:'tab'} Details
            %li
                %a{href:'#images', data-toggle:'tab'} Images
            %li#show-viewer
                %a{href:'#viewer', data-toggle:'tab'} Viewer

        .tab-content
            #details.tab-pane.active

        .tab-content
            #images.tab-pane

        .tab-content
            #viewer.tab-pane
                #views-left
                    #view-axial.view
                        %canvas{:height => "264", :width => "220"}
                        #nav-zaxis.slider.nav-slider-vertical
                    #view-coronal.view
                        %canvas{:height => "220", :width => "220"}
                        #nav-yaxis.slider.nav-slider-vertical
                #views-right
                    #view-sagittal.view
                        %canvas{:height => "220", :width => "264"}
                        #nav-xaxis.slider.nav-slider-horizontal
                    #data-panel
                        #data-current-coords
                        #data-current-value
                #layer-panel
                    %div Layers
                    #layer-list-panel
                        #layer-visible-list
                        %ul#layer-list.layer-settings
                    #layer-settings-panel
                        .layer-container-half-width
                            Color palette:
                            %select#select-color.layer-settings
                            Positive/Negative:
                            %select#select-sign.layer-settings
                        #checkbox-list
                        .layer-container-full-width
                            Opacity:
                            #opacity.slider.layer-settings
                            Pos. threshold:
                            #pos-threshold.slider.layer-settings
                            Neg. threshold:
                            #neg-threshold.slider.layer-settings

{% for statmap in study.statmap_set.all %}
    <li><a href="{% url 'statmap_details' statmap.id %}">{{ statmap.name }}</a></li>
{% endfor %}

<a href="{{study.url}}">{{study.name}}</a> by {{study.authors}}

<a href="{% url 'edit_statmaps' study.id %}">Add/edit files</a>
</div>
{% endblock %}

